# 1 лабораторная работа по предмету "Сервис-ориентированная архитектура"

## Вариант
4196 - [журнал](https://docs.google.com/spreadsheets/d/1sfMNkabZRdluRYAbRoyrfX9U9_yW1_u5Lb9jXHkY8hc/edit?gid=1826881315#gid=1826881315)

## Авторы

- Калинин Даниил Дмитриевич P34141 - https://github.com/DanKalinin125
- Ушаков Максим Евгеньевич P34141 - https://github.com/dmeaaxd

## Задание

Разработать спецификацию в формате `OpenAPI` для набора веб-сервисов, реализующего следующую функциональность:

Для разработанной спецификации необходимо сгенерировать интерактивную веб-документацию с помощью Swagger UI. Документация должна содержать описание всех REST API обоих сервисов с текстовым описанием функциональности каждой операции. Созданную веб-документацию необходимо развернуть на сервере `helios`.

### Описание веб-сервисов

#### Первый веб-сервис

Должен осуществлять управление коллекцией объектов. 
В коллекции необходимо хранить объекты класса `Dragon` (см. [Структуры данных](#структуры-данных))

Веб-сервис должен удовлетворять следующим требованиям:

- API, реализуемый сервисом, должен соответствовать рекомендациям подхода **RESTful**.
- Необходимо реализовать следующий базовый набор операций с объектами коллекции: 
  - добавление нового элемента, получение элемента по ИД,
  - обновление элемента,
  - удаление элемента, 
  - получение массива элементов
- Операция, выполняемая над объектом коллекции, должна определяться методом **HTTP-запроса**.
- Операция получения массива элементов должна поддерживать возможности:
  - сортировки по любой комбинации полей класса,
  - фильтрации по любой комбинации полей класса,
  - постраничного вывода результатов выборки с указанием размера и порядкового номера выводимой страницы
- Все параметры, необходимые для выполнения операции, должны передаваться в **URL** запроса.
- Информация об объектах коллекции должна передаваться в формате **json**.
- В случае передачи сервису данных, нарушающих заданные на уровне класса ограничения целостности, сервис должен возвращать код ответа http, соответствующий произошедшей ошибке.
- Помимо базового набора, веб-сервис должен поддерживать следующие операции над объектами коллекции (Эти операции должны размещаться на отдельных URL):
  - Вернуть массив объектов, значение поля name которых начинается с заданной подстроки.
  - Вернуть массив объектов, значение поля killer которых меньше заданного.
  - Вернуть массив объектов, значение поля character которых больше заданного. 

#### Второй веб-сервис

Должен располагаться на URL `/killer`, и реализовывать ряд дополнительных операций, связанных с вызовом API первого сервиса:

- /teams/create/{team-id}/{team-name}/{team-size}/{start-cave-id} : создать новую команду убийц драконов и сохранить её в БД
- /team/{team-id}/move-to-cave/{cave-id} : отправить команду убийц драконов в указанную пещеру 

Эти операции также должны размещаться на отдельных URL.

### Структуры данных

```java
public class Dragon {
    private Integer id; //Поле не может быть null, Значение поля должно быть больше 0, Значение этого поля должно быть уникальным, Значение этого поля должно генерироваться автоматически
    private String name; //Поле не может быть null, Строка не может быть пустой
    private Coordinates coordinates; //Поле не может быть null
    private java.time.LocalDate creationDate; //Поле не может быть null, Значение этого поля должно генерироваться автоматически
    private Long age; //Значение поля должно быть больше 0, Поле не может быть null
    private Color color; //Поле может быть null
    private DragonType type; //Поле не может быть null
    private DragonCharacter character; //Поле не может быть null
    private Person killer; //Поле может быть null
}
public class Coordinates {
    private Integer x; //Поле не может быть null
    private float y;
}
public class Person {
    private String name; //Поле не может быть null, Строка не может быть пустой
    private String passportID; //Длина строки должна быть не меньше 10, Длина строки не должна быть больше 32, Поле может быть null
    private Location location; //Поле не может быть null
}
public class Location {
    private float x;
    private Float y; //Поле не может быть null
    private float z;
    private String name; //Строка не может быть пустой, Поле не может быть null
}
public enum Color {
    BLACK,
    ORANGE,
    WHITE,
    BROWN;
}
public enum DragonType {
    WATER,
    UNDERGROUND,
    AIR,
    FIRE;
}
public enum DragonCharacter {
    CUNNING,
    WISE,
    CHAOTIC,
    CHAOTIC_EVIL,
    FICKLE;
}
```

## Реализация

Файл с описание API - [openapi.yaml](openapi.yaml)

Лучше всего запускать через [Swagger Editor](https://editor.swagger.io/)

## Развертывание

Развернуто на личном сервере - http://80.242.57.251:8080/